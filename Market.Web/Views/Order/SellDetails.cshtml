@model Market.Web.ViewModels.DetailsOrderViewModel

@{
    ViewBag.Title = "Details";
}

<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <div class="page-info">
                <h2>Заказы</h2>
                <p class="lead">Здесь отображается информация по заказам</p>
            </div>
            @{Html.RenderAction("AccountMenu", "Account"); }
            <div class="order-details-container">
                <div class="order-details-head">
                    <h4>Информащия о заказе</h4>
                </div>
                <div class="order-details-body">
                    <div class="order-details-row row">
                        <div class="order-details-col col-md-4">
                            <label>Предложение (Оффер)</label>
                        </div>
                        <div class="order-details-col col-md-8">
                            <span>@Html.ActionLink(Model.OfferHeader, "Details", "Offer", new { id = Model.OfferId }, null)</span>
                        </div>
                    </div>
                    <div class="order-details-row row">
                        <div class="order-details-col col-md-4">
                            <label>Покупатель</label>
                        </div>
                        <div class="order-details-col col-md-8">
                            <span>@Html.ActionLink(Model.BuyerName, "Info", "Profile", new { id = Model.BuyerId }, null)</span>
                        </div>
                    </div>
                    <div class="order-details-row row">
                        <div class="order-details-col col-md-4">
                            <label>Статус</label>
                        </div>
                        <div class="order-details-col col-md-8">
                            <span>@Model.OrderStatus</span>
                        </div>
                    </div>
                    <div class="order-details-row row">
                        <div class="order-details-col col-md-4">
                            <label>Цена</label>
                        </div>
                        <div class="order-details-col col-md-8">
                            <span>@Model.OfferPrice</span>
                        </div>
                    </div>
                    <div class="order-details-row row">
                        <div class="order-details-col col-md-5">
                            @if (Model.OrderStatus == Market.Model.Models.Status.SellerProviding)
                            {
                                using (Html.BeginForm("ProvideData", "Checkout", null, FormMethod.Get, null))
                                {
                                    @Html.HiddenFor(m => m.ModeratorId)
                                    @Html.HiddenFor(m => m.Id)
                                    <input type="submit" value="Предоставить данные" />
                                }

                            }
                            else if ((Model.OrderStatus == Market.Model.Models.Status.ClosedSeccessfuly ||
                            Model.OrderStatus == Market.Model.Models.Status.PayingToSeller) && !Model.BuyerFeedbacked)
                            {
                                using (Html.BeginForm("GiveToBuyer", "Feedback", null, FormMethod.Get, null))
                                {
                                    @Html.Hidden("receiverId", Model.BuyerId)
                                    @Html.Hidden("OrderId", Model.Id)

                                    <input type="submit" value="Оставить отзыв покупателю" />
                                }
                            }
                        </div>
                    </div>
                </div>

                @*<div class="row">
                        <div class="col-md-12">
                            @Html.PageLinks(Model.PagingInfo, x => Url.Action("Inbox", new { page = x, sortOrder = ViewBag.CurrentSort, searchString = ViewBag.SearchString }))
                        </div>
                    </div>*@
            </div>
        </div>

    </div>
</div>
