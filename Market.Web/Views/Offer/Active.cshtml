@model Trader.WEB.Models.OfferListViewModel
@{
    ViewBag.Title = "All";

}
<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <div class="page-info">
                <h2>Предложения</h2>
                <p class="lead">Здесь отображается информация по предложениям</p>
            </div>
            @{Html.RenderAction("AccountMenu", "Account"); }
            <div class="account-offer-container">
                @{Html.RenderPartial("_AccountOffersMenu"); }
                @using (Html.BeginForm("Inbox", "Message", null, FormMethod.Get, new { @class = "form-inline form-message-filter" }))
                {


                    <div class="form-message-filter-item">
                        @Html.TextBox("SearchString", ViewBag.CurrentFilter as string, new { @class = "form-control", placeholder = "Поиск..." })
                    </div>

                    <div class="form-message-filter-item">
                        @Html.TextBox("SenderName", ViewBag.SenderName as string, new { @class = "form-control", placeholder = "От кого:" })
                    </div>




                    var filterList = new List<SelectListItem>();
                    var gameGroups = Model.Offers.GroupBy(m => m.Game);
                    foreach (var group in gameGroups)
                    {
                       
                        filterList.Add(new SelectListItem()
                        {
                            Text = group.Key,
                            
                            Selected = true
                        });
                    }
                    
                    <div class="form-message-filter-item">
                        @Html.DropDownList("CurrentFilter", filterList, new { @class = "form-control" })
                    </div>


                    <input type="submit" value="Поиск" class="btn btn-info" />




                }
                <table class="table table-hover" id="offers">
                    <tr>
                        <th>Игра</th>
                        <th>Заголовок</th>

                        <th>Дата</th>
                        <th>Цена</th>
                    </tr>
                    @foreach (var offer in Model.Offers)
                    {
                        <tr>
                            <td class="offer-game-td">@Html.GameIcons(offer.Game, 30) </td>
                            <td class="offer-header-td">@offer.Header</td>
                            <td class="offer-date-td" title="@offer.StartDate.ToShortTimeString()">@offer.StartDate.ToShortDateString()</td>
                            <td class="offer-price-td">@offer.Price</td>
                            <td class="offer-edit-td">@Html.ActionLink("Редактировать", "Edit", new { id = offer.Id })</td>
                            <td class="offer-remove-td"><a data-id="@offer.Id" id="remove-offer-link" class="remove-link"><img src="~/Content/Images/trash.png" class="remove-icon" /></a></td>
                        </tr>
                    }

                </table>
            </div>

        </div>

    </div>
</div>

